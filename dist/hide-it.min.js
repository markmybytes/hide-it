class HideIt{get tableHeaders(){return[...this.#a.querySelectorAll("tr:nth-child(1) th")].map(e=>e.innerText)}#a;#b;#c;#d;constructor(e,t={}){if(this.#a=document.querySelector(e),!this.#a)throw Error("Invalid selector");this.#a.classList.add("hideit"),this.#b=t.breakpoints||{"collapse-xs":576,"collapse-sm":768,"collapse-md":992,"collapse-lg":1200,collapse:Number.MAX_SAFE_INTEGER},this.#d=null,this.#c=parseInt(t.resizeTimeout)||150,this.process(),this.#a.addEventListener("click",this.#e.bind(this)),(!t.hasOwnProperty("renderOnResize")||t.hasOwnProperty("renderOnResize")&&t.renderOnResize)&&window.addEventListener("resize",this.#f.bind(this))}process(e=!0){this.#a.querySelectorAll("tbody tr:not(.child)").forEach(e=>{e.dataset.row=e.rowIndex}),this.#a.querySelectorAll("thead > tr > th").forEach((e,t)=>{let i=[...e.classList].filter(e=>Object.keys(this.#b).includes);0!=i.length&&this.#a.querySelectorAll(`tbody tr:not(.child) td:nth-child(${t+1})`).forEach(e=>{e.classList.add(i[0])})}),this.#g(),e&&this.#a.querySelectorAll("tbody > tr.hideit-expanded").forEach(e=>{let t=e.nextSibling.getElementsByClassName("hideit-details")[0];t.innerHTML=null,e.querySelectorAll("td.hideit-hidden").forEach(e=>{t.appendChild(this.#h(e))})}),this.#i()}render(){this.#g(),this.#a.querySelectorAll("tbody > tr.hideit-expanded").forEach(e=>{let t=e.nextSibling.getElementsByClassName("hideit-details")[0];for(let i of e.cells){if(i.classList.contains("hideit-hidden")&&!this.#j(t,i.cellIndex)){let s=t.children.length;for(;;){if(0==s){t.prepend(this.#h(i));break}if(s--,i.cellIndex>t.children[s].dataset.column){t.children[s].after(this.#h(i));break}}continue}if(!i.classList.contains("hideit-hidden")&&this.#j(t,i.cellIndex))for(let l of t.getElementsByTagName("li")){if(parseInt(l.dataset.column)!=i.cellIndex)continue;let d=l.getElementsByClassName("hideit-data")[0];d.children.length>0&&e.cells[parseInt(l.dataset.column)].append(...d.children),l.remove()}}}),this.#i()}hiddenClasses(){return Object.keys(this.#b).filter(e=>this.#b[e]>=window.innerWidth)}#j(e,t){for(let i of e.getElementsByTagName("li"))if(parseInt(i.dataset.column)==t)return!0;return!1}#h(s){let l=document.createElement("li");return l.dataset.column=s.cellIndex,l.appendChild(Object.assign(document.createElement("span"),{classList:["hideit-title"],innerHTML:this.tableHeaders[s.cellIndex]})),l.appendChild(Object.assign(document.createElement("span"),{classList:["hideit-data"]})),s.children.length>0?l.children[1].append(...s.children):l.children[1].innerHTML=s.innerText,l}#g(){this.#a.querySelectorAll("thead > tr > th").forEach((e,t)=>{let i=[...e.classList].filter(e=>Object.keys(this.#b).includes(e));0!=i.length&&(this.hiddenClasses().includes(i[0])?e.classList.add("hideit-hidden"):e.classList.remove("hideit-hidden"),this.#a.querySelectorAll(`tbody tr:not(.child) td:nth-child(${t+1})`).forEach(e=>{this.hiddenClasses().includes(i[0])?e.classList.add("hideit-hidden"):e.classList.remove("hideit-hidden")}))})}#i(){this.#a.querySelectorAll("tbody > tr:not(.child)").forEach(e=>{e.querySelector("td.hideit-toggler")?.classList.remove("hideit-toggler"),e.querySelector("td.hideit-hidden")?(e.classList.add("hideit-has-child"),e.querySelector("td:not(.hideit-hidden)")?.classList.add("hideit-toggler")):(e.classList.remove("hideit-has-child"),e.classList.contains("hideit-expanded")&&(this.#a.rows[e.rowIndex+1].remove(),e.classList.remove("hideit-expanded")))})}#f(d){this.#c<=0?this.render.bind(this):(clearTimeout(this.#d),this.#d=setTimeout(this.render.bind(this),this.#c))}#e(a){if(!a.target.classList.contains("hideit-toggler"))return;let r=a.target.closest("tr");if(r.classList.contains("hideit-expanded")){let n=r.nextSibling;n.querySelectorAll("td > ul.hideit-details > li").forEach(e=>{for(let t of this.#a.rows){if(t.dataset.row!=r.dataset.row)continue;let i=e.querySelector(".hideit-data");i.children.length>0?this.#a.rows[t.rowIndex].cells[parseInt(e.dataset.column)].append(...i.children):this.#a.rows[t.rowIndex].cells[parseInt(e.dataset.column)].innerHTML=i.innerHTML,e.remove();break}}),n.remove()}else{let h=Object.assign(document.createElement("tr"),{classList:["child"],colspan:"100%",innerHTML:`<td class="child" colspan="100%"><ul class="hideit-details" data-row="${r.dataset.row}"></ul></td>`});[...r.getElementsByClassName("hideit-hidden")].forEach(e=>{h.querySelector("td > ul").appendChild(this.#h(e))}),r.after(h)}r.classList.toggle("hideit-expanded")}}